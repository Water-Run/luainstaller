.TH LUAINSTALLER 1 "February 2026" "luainstaller v0.1.0" "User Commands"
.SH NAME
luainstaller \- bundle Lua projects into distributable executables (Windows/Linux)

.SH SYNOPSIS
.B luainstaller
.BR bundle " " \fIentry.lua\fR
.RI [ options ]
.br
.B luainstaller
.BR analyze " " \fIentry.lua\fR
.RI [ options ]
.br
.B luainstaller
.BR version

.SH DESCRIPTION
\fBluainstaller\fR is a packaging tool that turns a Lua project into a distributable program on
Windows and Linux. It performs \fBstatic dependency analysis\fR starting from an entry \fB.lua\fR
script and bundles the required runtime files.

By default, \fBluainstaller\fR outputs a \fBdirectory\fR containing the entry script and all
dependencies needed at runtime. With \fB--onefile\fR, it further wraps the directory bundle into a
\fBsingle executable file\fR.

The project is open-sourced on GitHub and licensed under the \fBLGPL\fR. See the repository for
source code, releases, and documentation:
https://github.com/Water-Run/luainstaller

\fBluainstaller\fR can be used as a CLI tool and (when installed via LuaRocks) as a Lua module via
\fBrequire("luainstaller")\fR.

.SH INSTALLATION
Install via LuaRocks:
.nf
luarocks install luainstaller
.fi
This installs the \fBluainstaller\fR CLI and the Lua module.

.SH COMMANDS
.TP
.B bundle
Bundle an entry script and its dependencies. Default output is a directory; use \fB--onefile\fR for
a single-file executable.
.TP
.B analyze
Analyze dependencies only; no bundling output is produced.
.TP
.B version
Print the version information.

.SH CLI USAGE
The CLI tool name is \fBluainstaller\fR.

.SS Help
.nf
luainstaller --help
.fi
On Linux, if the manpage is installed:
.nf
man luainstaller
.fi

.SS bundle
Default mode (output a directory):
.nf
luainstaller bundle \fIentry.lua\fR
.fi
Typical output:
.nf
success.
\fIentry.lua\fR => \fIoutput_dir\fR/
.fi

Single-file mode (output a single executable file):
.nf
luainstaller bundle \fIentry.lua\fR --onefile
.fi
Typical output:
.nf
success.
\fIentry.lua\fR => \fIoutput_file\fR
.fi

In both modes, \fBluainstaller\fR starts from the entry script, performs static dependency analysis
(unless disabled), then copies/includes required files into the output. With \fB--onefile\fR it wraps
the directory bundle into a single executable.

.SS analyze
Analyze dependencies only:
.nf
luainstaller analyze \fIentry.lua\fR
.fi
Typical output:
.nf
success.
N dependencies found:
  1) ...
  2) ...
.fi

.SH OPTIONS
The following options apply to \fBbundle\fR and/or \fBanalyze\fR as described.

.TP
.BI \-o ", " \-\-out " " path
Output path.
For \fBbundle\fR: a directory path in default mode, or a file path when \fB--onefile\fR is set.
Examples:
.nf
luainstaller bundle main.lua --out ../dist/
luainstaller bundle main.lua --onefile --out ../dist/app.exe
.fi

.TP
.B \-\-onefile
Generate a single-file executable. Default output is a directory.

.TP
.BI \-\-max\-deps " " n
Maximum number of dependencies allowed (default: 36).
.nf
luainstaller bundle main.lua --max-deps 100
luainstaller analyze main.lua --max-deps 50
.fi

.TP
.BI \-\-include " " path
Manually include additional dependencies. May be specified multiple times.
Use this for dynamic \fBrequire\fR patterns that static analysis cannot detect.
.nf
luainstaller bundle main.lua --include ./require.lua --include ./plugin.lua
.fi

.TP
.BI \-\-exclude " " path
Manually exclude dependencies. May be specified multiple times.
Use this to remove false positives (for example, \fBpcall(require, ...)\fR patterns).
.nf
luainstaller bundle main.lua --exclude ./test_utils.lua
.fi

.TP
.B \-\-no\-depscan
Disable dependency scanning. This switches to a fully manual mode where you must specify all
dependencies via \fB--include\fR.
.nf
luainstaller bundle main.lua --no-depscan --include ./a.lua --include ./b.lua
.fi

.TP
.B \-v ", " \-\-verbose
Enable verbose analysis and bundling logs.
.nf
luainstaller bundle main.lua --verbose
.fi

.SH LUA MODULE USAGE
When installed via LuaRocks, \fBluainstaller\fR can be invoked from Lua:

.nf
local luainstaller = require("luainstaller")

-- Bundle (default: output directory, depscan enabled)
local ok, out = luainstaller.bundle({ entry = "main.lua" })

-- Single-file bundle
local ok, out = luainstaller.bundle({
  entry   = "main.lua",
  onefile = true,
  out     = "../dist/app.exe",
})

-- Analyze only
local ok, deps = luainstaller.analyze("main.lua", { max_deps = 50 })

-- Version
print(luainstaller.version())
.fi

.SH SEE ALSO
GitHub repository: https://github.com/Water-Run/luainstaller

.SH LICENSE
LGPL
